# å¼€å‘æŒ‡å— DEVELOPMENT

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œå¼€å‘ï¼Œä»¥åŠå¦‚ä½•éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚

## å¼€å‘æ¨¡å¼é€‰æ‹©

### æ¨¡å¼ä¸€ï¼šå®Œå…¨æœ¬åœ°å¼€å‘ï¼ˆæ¨èï¼‰

**é€‚ç”¨åœºæ™¯ï¼š** æ—¥å¸¸å¼€å‘ã€åŠŸèƒ½å®ç°ã€è°ƒè¯•

**ä¼˜ç‚¹ï¼š**
- å¼€å‘é€Ÿåº¦å¿«ï¼Œçƒ­é‡è½½å“åº”å¿«
- å¯ä»¥ç›´æ¥ä½¿ç”¨IDEæ–­ç‚¹è°ƒè¯•
- ä¸éœ€è¦Dockerï¼Œèµ„æºå ç”¨å°‘
- ä¿®æ”¹ä»£ç ç«‹å³ç”Ÿæ•ˆ

**ç¼ºç‚¹ï¼š**
- éœ€è¦æœ¬åœ°å®‰è£…PHPã€MySQLã€Redis
- ç¯å¢ƒå¯èƒ½ä¸ç”Ÿäº§ç¯å¢ƒæœ‰å·®å¼‚

**æ­¥éª¤ï¼š**

1. **å®‰è£…æœ¬åœ°ç¯å¢ƒ**
   ```bash
   # ç¡®ä¿å·²å®‰è£…ï¼š
   # - PHP 8.1+ (åŒ…å«æ‰©å±•: pdo_mysql, redis, mbstring, xml, gd)
   # - Composer
   # - MySQL 8.0
   # - Redis 6.0
   # - Node.js 18+
   ```

2. **å¯åŠ¨MySQLå’ŒRedis**
   ```bash
   # Windows (ä½¿ç”¨XAMPPæˆ–æœåŠ¡)
   # Mac/Linux
   sudo service mysql start
   sudo service redis-server start
   # æˆ–
   brew services start mysql
   brew services start redis
   ```

3. **é…ç½®åç«¯**
   ```bash
   cd backend
   composer install
   cp .env.example .env
   
   # ç¼–è¾‘ .envï¼Œè®¾ç½®æœ¬åœ°æ•°æ®åº“
   # DB_HOST=127.0.0.1
   # DB_DATABASE=job_fair_signin_system
   # DB_USERNAME=root
   # DB_PASSWORD=ä½ çš„å¯†ç 
   # REDIS_HOST=127.0.0.1
   
   php artisan key:generate
   
   # åˆ›å»ºæ•°æ®åº“
   mysql -u root -p
   CREATE DATABASE job_fair_signin_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   
   php artisan migrate
   php artisan serve  # è¿è¡Œåœ¨ http://localhost:8000
   ```

4. **é…ç½®å‰ç«¯**
   ```bash
   cd frontend
   npm install
   npm run dev  # è¿è¡Œåœ¨ http://localhost:3000
   ```

### æ¨¡å¼äºŒï¼šæ··åˆæ¨¡å¼ï¼ˆæ¨èç”¨äºå›¢é˜Ÿåä½œï¼‰

**é€‚ç”¨åœºæ™¯ï¼š** å›¢é˜Ÿå¼€å‘ã€ç¯å¢ƒä¸€è‡´æ€§è¦æ±‚é«˜

**ä¼˜ç‚¹ï¼š**
- æ•°æ®åº“å’ŒRedisä½¿ç”¨Dockerï¼Œç¯å¢ƒä¸€è‡´
- PHPå’Œå‰ç«¯æœ¬åœ°è¿è¡Œï¼Œå¼€å‘é€Ÿåº¦å¿«
- å…¼é¡¾å¼€å‘é€Ÿåº¦å’Œç¯å¢ƒä¸€è‡´æ€§

**æ­¥éª¤ï¼š**

1. **å¯åŠ¨æ•°æ®åº“å’ŒRedisï¼ˆDockerï¼‰**
   ```bash
   # ä½¿ç”¨å¼€å‘ä¸“ç”¨çš„docker-composeé…ç½®
   docker-compose -f docker-compose.dev.yml up -d
   
   # æˆ–åªå¯åŠ¨MySQLå’ŒRedis
   docker-compose up -d mysql redis
   ```

2. **é…ç½®åç«¯ï¼ˆæœ¬åœ°è¿è¡Œï¼‰**
   ```bash
   cd backend
   composer install
   cp .env.example .env
   
   # ç¼–è¾‘ .envï¼Œä½¿ç”¨Dockerä¸­çš„æ•°æ®åº“
   # DB_HOST=127.0.0.1  # Dockeræ˜ å°„åˆ°æœ¬åœ°3306ç«¯å£
   # DB_DATABASE=job_fair_signin_system
   # DB_USERNAME=root
   # DB_PASSWORD=root
   # REDIS_HOST=127.0.0.1  # Dockeræ˜ å°„åˆ°æœ¬åœ°6379ç«¯å£
   
   php artisan key:generate
   php artisan migrate
   php artisan serve
   ```

3. **é…ç½®å‰ç«¯ï¼ˆæœ¬åœ°è¿è¡Œï¼‰**
   ```bash
   cd frontend
   npm install
   npm run dev
   ```

### æ¨¡å¼ä¸‰ï¼šå®Œå…¨Dockeræ¨¡å¼

**é€‚ç”¨åœºæ™¯ï¼š** ç”Ÿäº§ç¯å¢ƒæ¨¡æ‹Ÿã€CI/CDæµ‹è¯•

**æ­¥éª¤ï¼š**
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# åˆå§‹åŒ–åç«¯
docker-compose exec php composer install
docker-compose exec php php artisan key:generate
docker-compose exec php php artisan migrate

# æ„å»ºå‰ç«¯
cd frontend
npm install
npm run build

# è®¿é—® http://localhost
```

## ç¯å¢ƒå˜é‡é…ç½®

### æœ¬åœ°å¼€å‘ç¯å¢ƒ (.env)

```env
APP_ENV=local
APP_DEBUG=true
APP_URL=http://localhost:8000

# æœ¬åœ°æ•°æ®åº“
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=job_fair_signin_system
DB_USERNAME=root
DB_PASSWORD=ä½ çš„æœ¬åœ°MySQLå¯†ç 

# æœ¬åœ°Redis
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
```

### Dockerç¯å¢ƒ (.env)

```env
APP_ENV=production
APP_DEBUG=false
APP_URL=http://your-domain.com

# Dockeræ•°æ®åº“
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=job_fair_signin_system
DB_USERNAME=root
DB_PASSWORD=root

# Docker Redis
REDIS_HOST=redis
REDIS_PORT=6379
```

## å‰ç«¯ä»£ç†é…ç½®

å‰ç«¯å¼€å‘æœåŠ¡å™¨å·²é…ç½®ä»£ç†ï¼Œå°† `/api` è¯·æ±‚è½¬å‘åˆ°åç«¯ï¼š

```javascript
// frontend/vite.config.js
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:8000',  // æœ¬åœ°å¼€å‘
      changeOrigin: true,
    },
  },
}
```

## å¸¸è§é—®é¢˜

### 1. æœ¬åœ°MySQLè¿æ¥å¤±è´¥

**æ£€æŸ¥ï¼š**
- MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
- ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
- æ•°æ®åº“æ˜¯å¦å·²åˆ›å»º

```bash
# æµ‹è¯•è¿æ¥
mysql -u root -p -h 127.0.0.1
```

### 2. æœ¬åœ°Redisè¿æ¥å¤±è´¥

**æ£€æŸ¥ï¼š**
- RedisæœåŠ¡æ˜¯å¦å¯åŠ¨
- ç«¯å£6379æ˜¯å¦è¢«å ç”¨

```bash
# æµ‹è¯•è¿æ¥
redis-cli ping
# åº”è¯¥è¿”å› PONG
```

### 3. å‰ç«¯æ— æ³•è¿æ¥åç«¯API

**æ£€æŸ¥ï¼š**
- åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œåœ¨ http://localhost:8000
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ç½‘ç»œè¯·æ±‚
- ç¡®è®¤CORSé…ç½®æ­£ç¡®

### 4. PHPæ‰©å±•ç¼ºå¤±

**å®‰è£…å¿…è¦æ‰©å±•ï¼š**
```bash
# Ubuntu/Debian
sudo apt install php8.1-mysql php8.1-redis php8.1-mbstring php8.1-xml php8.1-gd

# Mac
brew install php@8.1
pecl install redis
```

## éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

å¼€å‘å®Œæˆåï¼Œå¯ä»¥ç»Ÿä¸€éƒ¨ç½²åˆ°äº‘ç«¯æœåŠ¡å™¨ã€‚**å…³é”®ç‚¹ï¼šåªéœ€è¦ä¿®æ”¹ `.env` æ–‡ä»¶ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ï¼**

### 1. å‡†å¤‡ç”Ÿäº§ç¯å¢ƒ

```bash
# åœ¨æœåŠ¡å™¨ä¸Šå…‹éš†é¡¹ç›®
git clone <repository-url>
cd job-fair-signin-system

# é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
cd backend
cp .env.production.example .env
# ç¼–è¾‘ .envï¼Œè®¾ç½®ç”Ÿäº§ç¯å¢ƒé…ç½®
```

### 2. ä¿®æ”¹ç¯å¢ƒé…ç½®

ç¼–è¾‘ `backend/.env`ï¼Œä¸»è¦ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

```env
# åº”ç”¨ç¯å¢ƒ
APP_ENV=production
APP_DEBUG=false
APP_URL=https://your-domain.com

# æ•°æ®åº“ï¼ˆæ ¹æ®éƒ¨ç½²æ–¹å¼é€‰æ‹©ï¼‰
# Dockeræ–¹å¼ï¼š
DB_HOST=mysql
DB_PASSWORD=your_secure_password

# æˆ–äº‘æ•°æ®åº“æ–¹å¼ï¼š
# DB_HOST=your-db-host.com
# DB_USERNAME=your_db_user
# DB_PASSWORD=your_db_password

# Redisï¼ˆæ ¹æ®éƒ¨ç½²æ–¹å¼é€‰æ‹©ï¼‰
# Dockeræ–¹å¼ï¼š
REDIS_HOST=redis

# æˆ–äº‘Redisæ–¹å¼ï¼š
# REDIS_HOST=your-redis-host.com
# REDIS_PASSWORD=your_redis_password
```

> ğŸ“– **è¯¦ç»†è¯´æ˜**ï¼šæŸ¥çœ‹ [ENVIRONMENT_CONFIG.md](./ENVIRONMENT_CONFIG.md) äº†è§£å®Œæ•´çš„ç¯å¢ƒé…ç½®æŒ‡å—

### 3. ä½¿ç”¨Dockeréƒ¨ç½²

```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d --build

# åˆå§‹åŒ–
docker-compose exec php composer install --no-dev --optimize-autoloader
docker-compose exec php php artisan key:generate
docker-compose exec php php artisan migrate --force

# ä¼˜åŒ–æ€§èƒ½
docker-compose exec php php artisan config:cache
docker-compose exec php php artisan route:cache
docker-compose exec php php artisan view:cache

# æ„å»ºå‰ç«¯
cd frontend
npm install
npm run build
```

### 4. é…ç½®Nginxï¼ˆå¦‚æœéœ€è¦ï¼‰

ç”Ÿäº§ç¯å¢ƒå¯èƒ½éœ€è¦é…ç½®åŸŸåå’ŒSSLè¯ä¹¦ï¼Œä¿®æ”¹ `nginx/conf.d/default.conf`ã€‚

### 5. éªŒè¯éƒ¨ç½²

```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
docker-compose exec php php artisan tinker
>>> DB::connection()->getPdo();

# æµ‹è¯•Redisè¿æ¥
>>> Redis::ping();
```

## å¼€å‘å·¥ä½œæµå»ºè®®

1. **æ—¥å¸¸å¼€å‘**ï¼šä½¿ç”¨æ¨¡å¼ä¸€ï¼ˆå®Œå…¨æœ¬åœ°ï¼‰ï¼Œå¼€å‘é€Ÿåº¦å¿«
2. **åŠŸèƒ½æµ‹è¯•**ï¼šä½¿ç”¨æ¨¡å¼äºŒï¼ˆæ··åˆæ¨¡å¼ï¼‰ï¼Œç¡®ä¿æ•°æ®åº“ç¯å¢ƒä¸€è‡´
3. **ä¸Šçº¿å‰æµ‹è¯•**ï¼šä½¿ç”¨æ¨¡å¼ä¸‰ï¼ˆå®Œå…¨Dockerï¼‰ï¼Œæ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒ
4. **ç”Ÿäº§éƒ¨ç½²**ï¼šä½¿ç”¨Docker Composeç»Ÿä¸€éƒ¨ç½²

